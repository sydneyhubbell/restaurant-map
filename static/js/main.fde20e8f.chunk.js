(this["webpackJsonprestaurant-map"]=this["webpackJsonprestaurant-map"]||[]).push([[0],{25:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(6),o=a.n(i),s=(a(25),a(2)),u=a(3),c=a(19),l=a(20),d=a(4),p=[{name:"Posto",latitude:42.393130393416975,longitude:-71.12023817216877,stars:4.5,category:"Fancier",review:"Great Pizza and cocktails"},{name:"SRV",latitude:42.341167652453514,longitude:-71.08160220247323,stars:5,category:"Fancier",review:"Incredible modern Italian, favorite restaurant in Boston"},{name:"Life Alive Organic Cafe",latitude:42.36710399603149,longitude:-71.10370172249357,stars:5,category:"Casual",review:"Incredible vegetarian salads & bowls. Favorite lunch spot"},{name:"Similans",latitude:42.36635440233365,longitude:-71.0782126899619,stars:4.7,category:"Fancier",review:"Great Thai food- try the green curry"},{name:"Pho Basil",latitude:42.34635787410512,longitude:-71.0863610565746,stars:4.5,category:"Casual",review:"Not fancy, but the best Pho. College Favorite"},{name:"Squealing Pig",latitude:42.335031338903555,longitude:-71.10164881620743,stars:3.5,category:"Bar",review:"Favorite college bar. Good tap list, food is ok"},{name:"James Hook & Co.",latitude:42.35497180351533,longitude:-71.05060155135841,stars:4,category:"Fast Food",review:"Tiny shack, best lobster rolls- outdoor eating but good prices"},{name:"Georgetown Cupcake",latitude:42.35207492173606,longitude:-71.07419330674165,stars:4.1,category:"Bakery",review:"Insane cupcakes- expensive but free flavor of the day if you get there early enough"},{name:"Thinking Cup",latitude:42.354339815839346,longitude:-71.06323525356133,stars:4.2,category:"Coffee Shop",review:"Good coffee and great sandwiches. Always busy inside, so get it to go and eat in The Common"}];var g="FETCHING_RESTAURANTS",f="FETCHING_RESTAURANTS_SUCCESS",m="FETCHING_RESTAURANTS_FAILURE";function v(){return function(e){return e({type:g}),Promise.resolve(p).then((function(t){e({type:f,payload:t})})).catch((function(t){e({type:m,payload:t})}))}}function b(e,t){var a=t.payload;switch(t.type){case g:return Object(d.a)({},e);case f:return Object(d.a)(Object(d.a)({},e),{},{restaurants:a});case m:default:return Object(d.a)({},e)}}var y={restaurants:[]},h=Object(l.createLogger)(),w=window.__REDUX_DEVTOOLS_EXTENSTION_COMPOSE__||u.c;var j=function(){return Object(u.d)(b,y,w(Object(u.a)(c.a,h)))},O=a(7),C=a(8),_=a(10),E=a(9),T=a(16),N=a(5),F=a(15),k=(a(31),a(1)),M=function(e){Object(_.a)(a,e);var t=Object(E.a)(a);function a(e){var r;return Object(O.a)(this,a),(r=t.call(this,e)).setupMap=function(e,t){Object(F.loadModules)(["esri/widgets/Editor","esri/geometry/support/webMercatorUtils","esri/layers/FeatureLayer","esri/popup/content/AttachmentsContent","esri/popup/content/CustomContent"],{}).then((function(a){var n=Object(T.a)(a,5),i=n[0],o=n[1],s=n[2],u=n[3],c=n[4];r.setState({map:e,view:t,webMercatorUtils:o,FeatureLayer:s,AttachmentsContent:u,CustomContent:c},(function(){var e=r.createGraphics();r._restaurantLayer=r.createLayer(e),r.state.map.add(r._restaurantLayer),r._editor=new i({view:t,container:document.createElement("div"),layerInfos:[{layer:r._restaurantLayer,fieldConfig:[{name:"name",label:"Name",editable:!0},{name:"category",label:"Category",editable:!0},{name:"rating",label:"Rating",editable:!0},{name:"review",label:"Review",editable:!0}]}]}),r.configureEditor()}))}))},r.createGraphics=function(){var e=r.props.restaurants,t=r.state.webMercatorUtils;return e.map((function(e){var a={type:"point",latitude:e.latitude,longitude:e.longitude};return{geometry:t.geographicToWebMercator(a),attributes:{name:e.name,rating:e.stars,category:e.category,review:e.review}}}))},r.createLayer=function(e){var t=r.state.FeatureLayer;return r._template={title:"{name}",outFields:["*"],content:r.generateTemplateContent,fieldInfos:[{fieldName:"name"},{fieldName:"rating"},{fieldName:"category"},{fieldName:"review"}],actions:[{title:"Edit",id:"edit-this",className:"esri-icon-edit"}]},new t({source:e,fields:[{name:"ObjectID",alias:"ObjectID",type:"oid"},{name:"name",alias:"Name",type:"string"},{name:"rating",alias:"Rating",type:"double"},{name:"category",alias:"Category",type:"string"},{name:"review",alias:"Review",type:"string"}],popupTemplate:r._template,outFields:["*"],objectIdField:"ObjectID",geometryType:"point",editingEnabled:!0,renderer:{type:"simple",symbol:{type:"picture-marker",url:"".concat("/restaurant-map","/assets/restaurant-icon.svg"),width:"25px",height:"25px"}}})},r.generateTemplateContent=function(e){var t=r.state,a=t.AttachmentsContent,n=t.CustomContent,i=new a({displayType:"list"});return[new n({outFields:["*"],creator:function(e){return"".concat(e.graphic.attributes.rating,"/5 stars\n          <ul>\n              <li>").concat(e.graphic.attributes.category,"</li>\n              <li>").concat(e.graphic.attributes.review,"</li>\n            </ul>\n        ")}}),i]},r.configureEditor=function(){var e=r.state.view,t=Object(N.a)(r);e.popup.on("trigger-action",(function(e){"edit-this"===e.action.id&&t.editThis()})),e.popup.watch("visible",(function(a){"editing-existing-feature"===t._editor.viewModel.state?e.popup.close():t._features=e.popup.features})),t._restaurantLayer.on("apply-edits",(function(){e.ui.remove(t._editor),t._features.forEach((function(e){e.popupTemplate=t._template})),t._editor.viewModel.cancelWorkflow()}))},r.editThis=function(){var e=r.state.view,t=Object(N.a)(r);t._editor.viewModel.activeWorkFlow||(e.popup.visible=!1,t._editor.startUpdateWorkflowAtFeatureEdit(e.popup.selectedFeature),e.ui.add(t._editor,"top-right"),e.popup.spinnerEnabled=!1),setTimeout((function(){var a=t._editor.domNode.getElementsByClassName("esri-editor__back-button esri-interactive");1===a.length&&(a[0].setAttribute("title","Cancel edits, return to popup"),a[0].addEventListener("click",(function(a){a.preventDefault(),t._editor.viewModel.cancelWorkflow(),e.ui.remove(t._editor),e.popup.open({features:t._features})})))}),150)},r.state={map:null,view:null,webMercatorUtils:null,FeatureLayer:null,AttachmentsContent:null,CustomContent:null},r}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.zoom,r=t.center;Object(F.loadModules)(["esri/config","esri/Map","esri/views/MapView"],{}).then((function(t){var n=Object(T.a)(t,3),i=n[0],o=n[1],s=n[2];i.apiKey="AAPKac9b362f225f4f378683a4a3ac766f69hi9tHlW8g37flkaxGDNZ0mguVNfC67EVRIw4XN0aCiQsni_vQNodhgNZ7H9xVbYL";var u=new o({basemap:"arcgis-light-gray"}),c=new s({container:"restaurantMap",map:u,zoom:a,center:[r.longitude,r.latitude]});c.when((function(){e.setupMap(u,c)}))}))}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"restaurant-map-div",id:"restaurantMap"})}}]),a}(n.a.Component);M.defaultProps={zoom:12,center:{latitude:42.35879,longitude:-71.0561},restaurantList:[]};var R=Object(s.b)((function(e,t){return{restaurants:t.restaurants}}),null)(M),S=function(e){Object(_.a)(a,e);var t=Object(E.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchRestaurants;0===e.restaurants.length&&t()}},{key:"render",value:function(){var e=this.props.restaurants;return Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:" Restaurant Reviews "}),Object(k.jsx)(R,{restaurants:e})]})}}]),a}(n.a.Component);S.defaultProps={restaurants:[]};var A=S;function I(e){return e.restaurants}var L=Object(s.b)((function(e){return{restaurants:I(e)}}),(function(e){return{fetchRestaurants:function(){e(v())}}}))(A),x=j(),G=function(){return Object(k.jsx)(s.a,{store:x,children:Object(k.jsx)(L,{})})};o.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(G,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.fde20e8f.chunk.js.map