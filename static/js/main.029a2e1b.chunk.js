(this["webpackJsonprestaurant-map"]=this["webpackJsonprestaurant-map"]||[]).push([[0],{15:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(12),o=a.n(i),s=(a(29),a(3)),u=a(8),c=a(23),l=a(24),d=a(9),p=a(2),g=[{id:0,name:"Trident Cafe",latitude:42.348403813905485,longitude:-71.08666597272564,rating:3.5,category:"Casual Brunch",review:"Fun bookshop brunch place- food is good, but atmosphere is better"},{id:1,name:"Posto",latitude:42.393130393416975,longitude:-71.12023817216877,rating:4.5,category:"Fancier",review:"Great Pizza and cocktails"},{id:2,name:"SRV",latitude:42.341167652453514,longitude:-71.08160220247323,rating:5,category:"Fancier",review:"Incredible modern Italian, favorite restaurant in Boston"},{id:3,name:"Life Alive Organic Cafe",latitude:42.36710399603149,longitude:-71.10370172249357,rating:5,category:"Casual",review:"Incredible vegetarian salads & bowls. Favorite lunch spot"},{id:4,name:"Similans",latitude:42.36635440233365,longitude:-71.0782126899619,rating:4.7,category:"Fancier",review:"Great Thai food- try the green curry"},{id:5,name:"Pho Basil",latitude:42.34635787410512,longitude:-71.0863610565746,rating:4.5,category:"Casual",review:"Not fancy, but the best Pho. College Favorite"},{id:6,name:"Squealing Pig",latitude:42.335031338903555,longitude:-71.10164881620743,rating:3.5,category:"Bar",review:"Favorite college bar. Good tap list, food is ok"},{id:7,name:"James Hook & Co.",latitude:42.35497180351533,longitude:-71.05060155135841,rating:4,category:"Fast Food",review:"Tiny shack, best lobster rolls- outdoor eating but good prices"},{id:8,name:"Georgetown Cupcake",latitude:42.35207492173606,longitude:-71.07419330674165,rating:4.1,category:"Bakery",review:"Insane cupcakes- expensive but free flavor of the day if you get there early enough"},{id:9,name:"Thinking Cup",latitude:42.354339815839346,longitude:-71.06323525356133,rating:4.2,category:"Coffee Shop",review:"Good coffee and great sandwiches. Always busy inside, so get it to go and eat in The Common"},{id:10,name:"Bronwyn",latitude:42.3797974681605,longitude:-71.09448165583905,rating:3.9,category:"Bar",review:"Fun German bar/restaurant. Great Oktoberfest specials"},{id:11,name:"3 Little Figs",latitude:42.39237612095277,longitude:-71.11068512298775,rating:4.8,category:"Coffee Shop",review:"Awesome Early Grey Latte- fun pastries"},{id:12,name:"Mortadella Head",latitude:42.39725233297917,longitude:-71.12187567546228,rating:3.2,category:"Pizza",review:"Pretty good. Very thick crust, a little too much sauce"},{id:13,name:"Bagelsaurus",latitude:42.38626598967312,longitude:-71.11960431243706,rating:4.4,category:"Breakfast, Bagels",review:"Amazing bagel sandwiches"},{id:14,name:"Goldilox Bagels",latitude:42.41688156487264,longitude:-71.11845486455239,rating:4.5,category:"Breakfast, Bagels",review:"Also amazing bagel sandwiches- gotta try the Lox Bagel"}];var b="FETCHING_RESTAURANTS",m="FETCHING_RESTAURANTS_SUCCESS",f="FETCHING_RESTAURANTS_FAILURE",v="ADD_RESTAURANT",y="UPDATE_RESTAURANT",h="DELETE_RESTAURANT";function j(){return function(e){return e({type:b}),Promise.resolve(g).then((function(t){e({type:m,payload:t})})).catch((function(t){e({type:f,payload:t})}))}}function w(e,t){var a=t.payload;switch(t.type){case b:return Object(p.a)({},e);case m:return Object(p.a)(Object(p.a)({},e),{},{restaurants:a});case f:return Object(p.a)({},e);case v:var r=e.restaurants.length;return Object(p.a)(Object(p.a)({},e),{},{restaurants:[].concat(Object(d.a)(e.restaurants),[Object(p.a)({id:r},a)])});case y:return Object(p.a)(Object(p.a)({},e),{},{restaurants:[].concat(Object(d.a)(e.restaurants.slice(0,a.id)),[Object(p.a)({},a)],Object(d.a)(e.restaurants.slice(a.id+1)))});case h:return Object(p.a)(Object(p.a)({},e),{},{restaurants:[].concat(Object(d.a)(e.restaurants.slice(0,a)),Object(d.a)(e.restaurants.slice(a+1)))});default:return Object(p.a)({},e)}}var O={restaurants:[]},C=Object(l.createLogger)(),_=window.__REDUX_DEVTOOLS_EXTENSTION_COMPOSE__||u.c;var E=function(){return Object(u.d)(w,O,_(Object(u.a)(c.a,C)))},N=a(4),k=a(5),T=a(7),R=a(6),F=a(20),A=a(11),S=a(19),L=(a(35),a(1)),x=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(e){var r;return Object(N.a)(this,a),(r=t.call(this,e)).setupMap=function(e,t){Object(S.loadModules)(["esri/widgets/Editor","esri/geometry/support/webMercatorUtils","esri/layers/FeatureLayer","esri/popup/content/AttachmentsContent","esri/popup/content/CustomContent"],{}).then((function(a){var n=Object(F.a)(a,5),i=n[0],o=n[1],s=n[2],u=n[3],c=n[4];r.setState({map:e,view:t,webMercatorUtils:o,FeatureLayer:s,AttachmentsContent:u,CustomContent:c},(function(){var e=r.createGraphics();r._restaurantLayer=r.createLayer(e),r.state.map.add(r._restaurantLayer),r._editor=new i({view:t,container:document.createElement("div"),layerInfos:[{layer:r._restaurantLayer,fieldConfig:[{name:"id",label:"id",editable:!1},{name:"name",label:"Name",editable:!0},{name:"category",label:"Category",editable:!0},{name:"rating",label:"Rating",editable:!0},{name:"review",label:"Review",editable:!0}]}]}),r.configureEditor()}))}))},r.createGraphics=function(){var e=r.props.restaurants,t=r.state.webMercatorUtils;return e.map((function(e){var a={type:"point",latitude:e.latitude,longitude:e.longitude};return{geometry:t.geographicToWebMercator(a),attributes:{id:e.id,name:e.name,rating:e.rating,category:e.category,review:e.review}}}))},r.createLayer=function(e){var t=r.state.FeatureLayer;return r._template={title:"{name}",outFields:["*"],content:r.generateTemplateContent,fieldInfos:[{fieldName:"id"},{fieldName:"name"},{fieldName:"rating"},{fieldName:"category"},{fieldName:"review"}],actions:[{title:"Edit",id:"edit-this",className:"esri-icon-edit"}]},new t({source:e,fields:[{name:"id",alias:"ID",type:"oid"},{name:"name",alias:"Name",type:"string"},{name:"rating",alias:"Rating",type:"double"},{name:"category",alias:"Category",type:"string"},{name:"review",alias:"Review",type:"string"}],popupTemplate:r._template,outFields:["*"],objectIdField:"ObjectID",geometryType:"point",editingEnabled:!0,renderer:{type:"simple",symbol:{type:"picture-marker",url:"".concat("/restaurant-map","/assets/restaurant-icon.svg"),width:"25px",height:"25px"}}})},r.generateTemplateContent=function(e){var t=r.state,a=t.AttachmentsContent,n=t.CustomContent,i=new a({displayType:"list"});return[new n({outFields:["*"],creator:function(e){return"".concat(e.graphic.attributes.rating,"/5 stars\n          <ul>\n              <li>").concat(e.graphic.attributes.category,"</li>\n              <li>").concat(e.graphic.attributes.review,"</li>\n            </ul>\n        ")}}),i]},r.configureEditor=function(){var e=r.state.view,t=Object(A.a)(r);e.popup.on("trigger-action",(function(e){"edit-this"===e.action.id&&t.editThis()})),e.popup.watch("visible",(function(a){"editing-existing-feature"===t._editor.viewModel.state?e.popup.close():t._features=e.popup.features})),t._restaurantLayer.on("apply-edits",(function(){e.ui.remove(t._editor),t._features.forEach((function(e){e.popupTemplate=t._template})),t._editor.viewModel.cancelWorkflow()}))},r.editThis=function(){var e=r.props,t=e.updateRestaurant,a=e.deleteRestaurant,n=r.state.view,i=Object(A.a)(r);i._editor.viewModel.activeWorkFlow||(n.popup.visible=!1,i._editor.startUpdateWorkflowAtFeatureEdit(n.popup.selectedFeature),n.ui.add(i._editor,"top-right"),n.popup.spinnerEnabled=!1),setTimeout((function(){var e=i._editor.domNode.getElementsByClassName("esri-editor__back-button esri-interactive");1===e.length&&(e[0].setAttribute("title","Cancel edits, return to popup"),e[0].addEventListener("click",(function(e){e.preventDefault(),i._editor.viewModel.cancelWorkflow(),n.ui.remove(i._editor),n.popup.open({features:i._features})})));var r=i._editor.domNode.getElementsByClassName("esri-editor__control-button esri-button");r.length>1&&r[0].addEventListener("click",(function(e){var a=i._features[0].attributes;t(Object(p.a)({},a))}));var o=i._editor.domNode.getElementsByClassName("esri-editor__control-button esri-button esri-button--tertiary");1===o.length&&o[0].addEventListener("click",(function(e){setTimeout((function(){var e=i._editor.domNode.getElementsByClassName("esri-editor__warning-option esri-editor__warning-option--positive");1===e.length&&e[0].addEventListener("click",(function(e){a(i._features[0].attributes.id)}))}),150)}))}),150)},r.state={map:null,view:null,webMercatorUtils:null,FeatureLayer:null,AttachmentsContent:null,CustomContent:null},r}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.zoom,r=t.center;Object(S.loadModules)(["esri/config","esri/Map","esri/views/MapView"],{}).then((function(t){var n=Object(F.a)(t,3),i=n[0],o=n[1],s=n[2];i.apiKey="AAPKac9b362f225f4f378683a4a3ac766f69hi9tHlW8g37flkaxGDNZ0mguVNfC67EVRIw4XN0aCiQsni_vQNodhgNZ7H9xVbYL";var u=new o({basemap:"arcgis-light-gray"}),c=new s({container:"restaurantMap",map:u,zoom:a,center:[r.longitude,r.latitude]});c.when((function(){e.setupMap(u,c)}))}))}},{key:"render",value:function(){return Object(L.jsx)("div",{className:"restaurant-map-div",id:"restaurantMap"})}}]),a}(n.a.Component);x.defaultProps={zoom:12,center:{latitude:42.35879,longitude:-71.0561},restaurantList:[]};var M=Object(s.b)((function(e,t){return{restaurants:t.restaurants}}),(function(e){return{updateRestaurant:function(t){e(function(e){return{type:y,payload:e}}(t))},deleteRestaurant:function(t){e(function(e){return{type:h,payload:e}}(t))}}}))(x),B=(a(15),function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(){return Object(N.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){var e=this.props.addRestaurantCallback;return Object(L.jsxs)("div",{children:[Object(L.jsx)("p",{children:" Coming Soon "}),Object(L.jsx)("button",{className:"rm-solid-button large-margin",onClick:e,children:"Submit"})]})}}]),a}(n.a.Component));B.defaultProps={};var I=B,G=Object(s.b)((function(e,t){return{addRestaurantCallback:t.addRestaurantCallback}}),(function(e){return{addRestaurant:function(t){e(function(e){return{type:v,payload:e}}(t))}}}))(I),U=function(e){Object(T.a)(a,e);var t=Object(R.a)(a);function a(e){var r;return Object(N.a)(this,a),(r=t.call(this,e)).state={showForm:!1},r}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchRestaurants;0===e.restaurants.length&&t()}},{key:"render",value:function(){var e=this,t=this.props.restaurants,a=this.state.showForm;return Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{className:"header",children:[Object(L.jsx)("h1",{id:"title",children:" Restaurant Reviews "}),!a&&Object(L.jsx)("div",{children:Object(L.jsx)("button",{className:"rm-gradient-button large-margin",onClick:function(){e.setState({showForm:!0})},children:"Review a New Restaurant"})}),a&&Object(L.jsx)(G,{addRestaurantCallback:function(){e.setState({showForm:!1})}})]}),Object(L.jsx)(M,{restaurants:t})]})}}]),a}(n.a.Component);U.defaultProps={restaurants:[]};var P=U;function D(e){return e.restaurants}var z=Object(s.b)((function(e){return{restaurants:D(e)}}),(function(e){return{fetchRestaurants:function(){e(j())}}}))(P),H=E(),V=function(){return Object(L.jsx)(s.a,{store:H,children:Object(L.jsx)(z,{})})};o.a.render(Object(L.jsx)(n.a.StrictMode,{children:Object(L.jsx)(V,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.029a2e1b.chunk.js.map